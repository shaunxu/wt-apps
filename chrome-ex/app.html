<!doctype html>
<html>
  <head>
    <title>Worktile</title>

    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="app.css" rel="stylesheet" media="screen">

    <script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="lib/angular/angular.min.js"></script>
    <script type="text/javascript" src="lib/angular/angular-messages.min.js"></script>
    <script src="worktile.js"></script>
    <script src="app.js"></script>
  </head>
  <body ng-app="Worktile" ng-controller="MasterController">
    <div class="cover" ng-show="__loading">
      <div class="outer">
        <div class="middle text-info">
          <div class="inner">
            <span class="glyphicon glyphicon-refresh glyphicon-3x fa-spin"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-info wt-container">
      <div class="panel-heading wt-header">
        <div class="options-area pull-right">
          <img ng-show="me.uid" ng-src="{{me.avatar}}" class="wt-avatar">
        </div>
        <div>
          <h3 class="modal-title" style="float: left;">{{name}}</h3><span class="badge" style="margin-left: 5px;">beta</span>
        </div>
      </div>
      <div class="panel-body">
        <div class="type-selection" ng-if="false">
          <div class="btn-group " role="group">
            <button type="button" class="btn btn-default" ng-click="type = types.task">
              <span ng-class="type === types.task ? 'glyphicon glyphicon-check' : 'glyphicon glyphicon-unchecked'"></span> Task
            </button>
            <button type="button" class="btn btn-default" ng-click="type = types.appointment" ng-if="false">
              <span ng-class="type === types.appointment ? 'glyphicon glyphicon-check' : 'glyphicon glyphicon-unchecked'"></span> Appointment
            </button>
            <button type="button" class="btn btn-default" ng-click="type = types.post">
              <span ng-class="type === types.post ? 'glyphicon glyphicon-check' : 'glyphicon glyphicon-unchecked'"></span> Post
            </button>
            <button type="button" class="btn btn-default" ng-click="type = types.document" ng-if="false">
              <span ng-class="type === types.document ? 'glyphicon glyphicon-check' : 'glyphicon glyphicon-unchecked'"></span> Document
            </button>
          </div>
        </div>

        <form novalidate name="targetForm">
          <div class="input-group" title="Name">
            <span class="input-group-addon"><span class="glyphicon glyphicon-fire"></span></span>
            <input required type="text" class="form-control" id="title" name="title" placeholder="Name" ng-model="target.title">
            <span class="input-group-btn">
              <button class="btn btn-primary" type="button" ng-click="copy()" title="Insert page title and URL">
                <span class="glyphicon glyphicon-copy"></span>
              </button>
            </span>
          </div>
          <div class="input-group" title="Description" ng-show="mode === modes.advanced">
            <span class="input-group-addon input-group-addon-vtop"><span class="glyphicon glyphicon-edit"></span></span>
            <textarea class="form-control" rows="3" name="content" placeholder="Description" ng-model="target.content"></textarea>
          </div>
          <fieldset class="project-selector" ng-disabled="!me.uid">
            <div class="input-group" title="Project">
              <span class="input-group-addon"><span class="glyphicon glyphicon-inbox"></span></span>
              <select required class="form-control" ng-model="target.pid" name="pid">
                <option ng-repeat="project in projects" value="{{project.pid}}">{{project.name}}</option>
              </select>
            </div>
            <div class="input-group" title="List" ng-show="type === types.task">
              <span class="input-group-addon"><span class="glyphicon glyphicon-th-list"></span></span>
              <select required class="form-control" ng-model="target.eid" name="eid">
                <option ng-repeat="entry in projects[target.pid].entries" value="{{entry.entry_id}}">{{entry.name}}</option>
              </select>
            </div>
            <div class="row" ng-show="mode === modes.advanced">
              <div class="col-xs-6" style="padding-right: 5px;">
                <div class="input-group" title="Assignee(s)">
                  <span class="input-group-addon input-group-addon-vtop"><span class="glyphicon glyphicon-user"></span></span>
                  <select multiple class="form-control" ng-model="target.assignees" name="assignees">
                    <option ng-repeat="member in projects[target.pid].members" value="{{member.uid}}">{{member.display_name}}</option>
                  </select>
                </div>
              </div>
              <div class="col-xs-6" style="padding-left: 5px;">
                <div class="input-group" title="Follower(s)">
                  <span class="input-group-addon input-group-addon-vtop"><span class="glyphicon glyphicon-thumbs-up"></span></span>
                  <select multiple class="form-control" ng-model="target.followers" name="followers">
                    <option ng-repeat="member in projects[target.pid].members" value="{{member.uid}}">{{member.display_name}}</option>
                  </select>
                </div>
              </div>
            </div>
          </fieldset>
        </form>
        <div class="btn-group btn-group-sm toolbar" role="group">
          <button type="button" class="btn btn-default" ng-click="switchMode($event)">
            <span ng-class="mode === modes.advanced ? 'glyphicon glyphicon-check' : 'glyphicon glyphicon-unchecked'" aria-hidden="true"></span> Advanced Mode
          </button>
        </div>
        <div class="btn-group btn-group-sm pull-right toolbar" role="group">
          <button type="button" class="btn btn-primary" ng-click="me.uid ? logout() : login()">
            <span ng-class="me.uid ? 'glyphicon glyphicon-log-out' : 'glyphicon glyphicon-log-in'" aria-hidden="true"></span> {{me.uid ? 'Logout' : 'Login'}}
          </button>
          <button ng-show="me.uid" type="button" class="btn btn-primary" ng-click="refresh()">
            <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Refresh
          </button>
          <button ng-disabled="!me.uid || !target.pid" type="button" class="btn btn-primary" ng-click="submit()">
            <span class="glyphicon glyphicon-send" aria-hidden="true"></span> Submit
          </button>
        </div>
      </div>
    </div>
<!--
    <pre>{{me | json}}</pre>

    <pre>{{post | json}}</pre>

    <pre>{{projects | json}}</pre>
-->
  </body>
</html>